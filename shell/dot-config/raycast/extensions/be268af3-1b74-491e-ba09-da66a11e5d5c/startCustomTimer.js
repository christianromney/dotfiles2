"use strict";var T=Object.defineProperty;var V=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var D=Object.prototype.hasOwnProperty;var I=(t,r)=>{for(var n in r)T(t,n,{get:r[n],enumerable:!0})},A=(t,r,n,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of x(r))!D.call(t,i)&&i!==n&&T(t,i,{get:()=>r[i],enumerable:!(o=V(r,i))||o.enumerable});return t};var v=t=>A(T({},"__esModule",{value:!0}),t);var H={};I(H,{default:()=>M});module.exports=v(H);var s=require("@raycast/api"),h=require("react");var a=require("@raycast/api"),N=require("child_process"),E=require("crypto"),u=require("fs");var P=t=>{let r=Math.floor(t/3600),n=String(Math.floor(t%3600/60)).padStart(2,"0"),o=String(Math.floor(t%60)).padStart(2,"0");return`${r}:${n}:${o}`};var g=a.environment.supportPath+"/customTimers.json";async function w(t,r="Untitled"){let o=(a.environment.supportPath+"/"+new Date().toISOString()+"---"+t+".timer").replace(/:/g,"__");(0,u.writeFileSync)(o,r);let i=(0,a.getPreferenceValues)(),f=`${a.environment.assetsPath+"/"+i.selectedSound}`,c=`sleep ${t} && if [ -f "${o}" ]; then `;if(i.selectedSound==="speak_timer_name"?c+=`say "${r}"`:c+=`afplay "${f}"`,i.ringContinuously){let l=`${o}`.replace(".timer",".dismiss");(0,u.writeFileSync)(l,".dismiss file for Timers"),c+=` && while [ -f "${l}" ]; do afplay "${f}"; done`}c+=` && osascript -e 'display notification "'"Timer complete"'" with title "Ding!"' && rm "${o}"; else echo "Timer deleted"; fi`,(0,N.exec)(c,(l,p)=>{if(l){console.log(`error: ${l.message}`);return}if(p){console.log(`stderr: ${p}`);return}}),(0,a.popToRoot)(),await(0,a.showHUD)(`Timer "${r}" started for ${P(t)}! \u{1F389}`)}function b(){(0,u.existsSync)(g)||(0,u.writeFileSync)(g,JSON.stringify({}))}function O(t){b();let r=JSON.parse((0,u.readFileSync)(g,"utf8"));r[(0,E.randomUUID)()]=t,(0,u.writeFileSync)(g,JSON.stringify(r))}var d=require("react/jsx-runtime");function M(t){let r=Object.values(t.arguments).some(e=>e!==""),[n,o]=(0,h.useState)(),[i,f]=(0,h.useState)(),[c,l]=(0,h.useState)(),p=e=>{if(b(),e.hours===""&&e.minutes===""&&e.seconds==="")new s.Toast({style:s.Toast.Style.Failure,title:"No values set for timer length!"}).show();else if(isNaN(Number(e.hours)))o("Hours must be a number!");else if(isNaN(Number(e.minutes)))f("Minutes must be a number!");else if(isNaN(Number(e.seconds)))l("Seconds must be a number!");else{(0,s.closeMainWindow)();let m=e.name?e.name:"Untitled",F=3600*Number(e.hours)+60*Number(e.minutes)+Number(e.seconds);w(F,m),e.willBeSaved&&O({name:e.name,timeInSeconds:F})}},y=()=>{n&&n.length>0&&o(void 0)},$=()=>{i&&i.length>0&&f(void 0)},C=()=>{c&&c.length>0&&l(void 0)},S=[{id:"hours",title:"Hours",placeholder:"0",err:n,drop:y,validator:e=>{let m=e.target.value;isNaN(Number(m))?o("Hours must be a number!"):y()}},{id:"minutes",title:"Minutes",placeholder:"00",err:i,drop:$,validator:e=>{let m=e.target.value;isNaN(Number(m))?f("Minutes must be a number!"):$()}},{id:"seconds",title:"Seconds",placeholder:"00",err:c,drop:C,validator:e=>{let m=e.target.value;isNaN(Number(m))?l("Seconds must be a number!"):C()}}];return(0,s.getPreferenceValues)().newTimerInputOrder!=="hhmmss"&&S.reverse(),(0,d.jsxs)(s.Form,{actions:(0,d.jsx)(s.ActionPanel,{children:(0,d.jsx)(s.Action.SubmitForm,{title:"Start Custom Timer",onSubmit:e=>p(e)})}),children:[S.map((e,m)=>(0,d.jsx)(s.Form.TextField,{id:e.id,title:e.title,placeholder:e.placeholder,defaultValue:t.arguments[e.id],error:e.err,onChange:e.drop,onBlur:e.validator},m)),(0,d.jsx)(s.Form.TextField,{id:"name",title:"Name",placeholder:"Pour Tea",autoFocus:r}),(0,d.jsx)(s.Form.Checkbox,{id:"willBeSaved",label:"Save as preset"})]})}0&&(module.exports={});
