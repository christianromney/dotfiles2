"use strict";var c=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var w=Object.prototype.hasOwnProperty;var P=(t,e)=>{for(var s in e)c(t,s,{get:e[s],enumerable:!0})},D=(t,e,s,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of M(e))!w.call(t,n)&&n!==s&&c(t,n,{get:()=>e[n],enumerable:!(a=y(e,n))||a.enumerable});return t};var O=t=>D(c({},"__esModule",{value:!0}),t);var N={};P(N,{default:()=>$});module.exports=O(N);var h=require("@raycast/api");var r=require("@raycast/api"),p=require("child_process");var i=require("fs");var d=t=>{let e=Math.floor(t/3600),s=String(Math.floor(t%3600/60)).padStart(2,"0"),a=String(Math.floor(t%60)).padStart(2,"0");return`${e===0?"":e+":"}${s}:${a}`};var C=r.environment.supportPath+"/customTimers.json",v=r.environment.supportPath+"/defaultPresetVisibles.json";var g=(t=!1)=>{let e=(0,r.getPreferenceValues)();if(parseFloat(e.volumeSetting)>5){let s="\u26A0\uFE0F Timer alert volume should not be louder than 5 (it can get quite loud!)";return t?(0,r.showHUD)(s):(0,r.showToast)({style:r.Toast.Style.Failure,title:s}),!1}return!0};async function S(t,e="Untitled",s="default"){(0,r.popToRoot)();let n=(r.environment.supportPath+"/"+new Date().toISOString()+"---"+t+".timer").replace(/:/g,"__");(0,i.writeFileSync)(n,e);let m=(0,r.getPreferenceValues)(),T=`${r.environment.assetsPath+"/"+(s==="default"?m.selectedSound:s)}`,o=[`sleep ${t}`];o.push(`if [ -f "${n}" ]; then osascript -e 'display notification "Timer \\"${e}\\" complete" with title "Ding!"'`);let f=`afplay "${T}" --volume ${m.volumeSetting.replace(",",".")}`;if(m.selectedSound==="speak_timer_name"?o.push(`say "${e}"`):o.push(f),m.ringContinuously){let u=`${n}`.replace(".timer",".dismiss");(0,i.writeFileSync)(u,".dismiss file for Timers"),o.push(`while [ -f "${u}" ]; do ${f}; done`)}o.push(`rm "${n}"; else echo "Timer deleted"; fi`),(0,p.exec)(o.join(" && "),(u,l)=>{if(u){console.log(`error: ${u.message}`);return}if(l){console.log(`stderr: ${l}`);return}}),await(0,r.showHUD)(`Timer "${e}" started for ${d(t)}! \u{1F389}`)}var $=async()=>{g()&&(await(0,h.closeMainWindow)(),S(60*15,"15 Minute Timer"))};
