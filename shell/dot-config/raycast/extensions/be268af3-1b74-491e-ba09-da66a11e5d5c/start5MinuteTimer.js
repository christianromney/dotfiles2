"use strict";var c=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var $=Object.prototype.hasOwnProperty;var P=(t,e)=>{for(var r in e)c(t,r,{get:e[r],enumerable:!0})},w=(t,e,r,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of M(e))!$.call(t,n)&&n!==r&&c(t,n,{get:()=>e[n],enumerable:!(a=y(e,n))||a.enumerable});return t};var D=t=>w(c({},"__esModule",{value:!0}),t);var b={};P(b,{default:()=>O});module.exports=D(b);var h=require("@raycast/api");var s=require("@raycast/api"),f=require("child_process");var o=require("fs");var p=t=>{let e=Math.floor(t/3600),r=String(Math.floor(t%3600/60)).padStart(2,"0"),a=String(Math.floor(t%60)).padStart(2,"0");return`${e===0?"":e+":"}${r}:${a}`};var F=s.environment.supportPath+"/customTimers.json",v=s.environment.supportPath+"/defaultPresetVisibles.json",g=(t=!1)=>{let e=(0,s.getPreferenceValues)();if(parseFloat(e.volumeSetting)>5){let r="\u26A0\uFE0F Timer alert volume should not be louder than 5 (it can get quite loud!)";return t?(0,s.showHUD)(r):(0,s.showToast)({style:s.Toast.Style.Failure,title:r}),!1}return!0};async function S(t,e="Untitled",r="default"){(0,s.popToRoot)();let n=(s.environment.supportPath+"/"+new Date().toISOString()+"---"+t+".timer").replace(/:/g,"__");(0,o.writeFileSync)(n,e);let u=(0,s.getPreferenceValues)(),T=`${s.environment.assetsPath+"/"+(r==="default"?u.selectedSound:r)}`,i=[`sleep ${t}`];i.push(`if [ -f "${n}" ]; then osascript -e 'display notification "Timer \\"${e}\\" complete" with title "Ding!"'`);let l=`afplay "${T}" --volume ${u.volumeSetting.replace(",",".")}`;if(u.selectedSound==="speak_timer_name"?i.push(`say "${e}"`):i.push(l),u.ringContinuously){let m=`${n}`.replace(".timer",".dismiss");(0,o.writeFileSync)(m,".dismiss file for Timers"),i.push(`while [ -f "${m}" ]; do ${l}; done`)}i.push(`rm "${n}"; else echo "Timer deleted"; fi`),(0,f.exec)(i.join(" && "),(m,d)=>{if(m){console.log(`error: ${m.message}`);return}if(d){console.log(`stderr: ${d}`);return}}),await(0,s.showHUD)(`Timer "${e}" started for ${p(t)}! \u{1F389}`)}var O=async()=>{g()&&(await(0,h.closeMainWindow)(),S(60*5,"5 Minute Timer"))};
