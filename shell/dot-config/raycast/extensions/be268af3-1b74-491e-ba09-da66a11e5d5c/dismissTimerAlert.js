"use strict";var a=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var T=Object.getOwnPropertyNames;var S=Object.prototype.hasOwnProperty;var h=(e,i)=>{for(var s in i)a(e,s,{get:i[s],enumerable:!0})},g=(e,i,s,t)=>{if(i&&typeof i=="object"||typeof i=="function")for(let n of T(i))!S.call(e,n)&&n!==s&&a(e,n,{get:()=>i[n],enumerable:!(t=p(i,n))||t.enumerable});return e};var $=e=>g(a({},"__esModule",{value:!0}),e);var D={};h(D,{default:()=>y});module.exports=$(D);var o=require("@raycast/api"),u=require("fs");var r=require("@raycast/api");var m=require("fs"),d=require("path");var f=e=>(e.d1=e.d1=="----"?void 0:e.d1,e.d2=e.d2=="----"?void 0:e.d2,Math.round((e.d1?new Date(e.d1):new Date).getTime()-(e.d2?new Date(e.d2):new Date).getTime())/1e3);var M=r.environment.supportPath+"/customTimers.json";function l(){let e=[];return(0,m.readdirSync)(r.environment.supportPath).forEach(s=>{if((0,d.extname)(s)==".timer"){let t={name:"",secondsSet:-99,timeLeft:-99,originalFile:s,timeEnds:new Date};t.name=(0,m.readFileSync)(r.environment.supportPath+"/"+s).toString();let n=s.split("---");t.secondsSet=Number(n[1].split(".")[0]);let c=n[0].replace(/__/g,":");t.timeLeft=Math.max(0,Math.round(t.secondsSet-f({d2:c}))),t.timeEnds=new Date(c),t.timeEnds.setSeconds(t.timeEnds.getSeconds()+t.secondsSet),e.push(t)}}),e.sort((s,t)=>s.timeLeft-t.timeLeft),e}var y=async()=>{let e=l();if(e.filter(s=>s.timeLeft===0),e.length===0)return await(0,o.showToast)({style:o.Toast.Style.Failure,title:"No finished timers found!"});await(0,o.closeMainWindow)();let i=e[0].originalFile.replace(".timer",".dismiss");(0,u.unlinkSync)(o.environment.supportPath+"/"+i)};
