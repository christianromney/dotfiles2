"use strict";var u=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var T=Object.prototype.hasOwnProperty;var h=(e,t)=>{for(var r in t)u(e,r,{get:t[r],enumerable:!0})},y=(e,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of S(t))!T.call(e,o)&&o!==r&&u(e,o,{get:()=>t[o],enumerable:!(s=g(t,o))||s.enumerable});return e};var w=e=>y(u({},"__esModule",{value:!0}),e);var M={};h(M,{default:()=>P});module.exports=w(M);var i=require("@raycast/api");var n=require("@raycast/api");var a=require("fs"),f=require("path");var c=e=>(e.d1=e.d1=="----"?void 0:e.d1,e.d2=e.d2=="----"?void 0:e.d2,Math.round((e.d1?new Date(e.d1):new Date).getTime()-(e.d2?new Date(e.d2):new Date).getTime())/1e3);var b=n.environment.supportPath+"/customTimers.json",E=n.environment.supportPath+"/defaultPresetVisibles.json",l=e=>{try{(0,a.unlinkSync)(e)}catch(t){if(t instanceof Error&&!t.message.includes("ENOENT"))throw t}};function d(e){let t=n.environment.supportPath+"/"+e,r=t.replace(".timer",".dismiss");l(t),l(r)}function p(){let e=[];return(0,a.readdirSync)(n.environment.supportPath).forEach(r=>{if((0,f.extname)(r)==".timer"){let s={name:"",secondsSet:-99,timeLeft:-99,originalFile:r,timeEnds:new Date};s.name=(0,a.readFileSync)(n.environment.supportPath+"/"+r).toString();let o=r.split("---");s.secondsSet=Number(o[1].split(".")[0]);let m=o[0].replace(/__/g,":");s.timeLeft=Math.max(0,Math.round(s.secondsSet-c({d2:m}))),s.timeEnds=new Date(m),s.timeEnds.setSeconds(s.timeEnds.getSeconds()+s.secondsSet),e.push(s)}}),e.sort((r,s)=>r.timeLeft-s.timeLeft),e}var P=async()=>{if(!(0,i.getPreferenceValues)().ringContinuously)return await(0,i.showToast)({style:i.Toast.Style.Failure,title:"Ring Continuously setting not enabled!"});let e=p().filter(t=>t.timeLeft===0);if(e.length===0)return await(0,i.showToast)({style:i.Toast.Style.Failure,title:"No finished timers found!"});await(0,i.closeMainWindow)(),d(e[0].originalFile)};
