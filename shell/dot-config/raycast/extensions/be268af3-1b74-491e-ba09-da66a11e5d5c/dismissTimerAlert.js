"use strict";var m=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var S=Object.prototype.hasOwnProperty;var h=(e,r)=>{for(var s in r)m(e,s,{get:r[s],enumerable:!0})},T=(e,r,s,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of g(r))!S.call(e,o)&&o!==s&&m(e,o,{get:()=>r[o],enumerable:!(t=p(r,o))||t.enumerable});return e};var y=e=>T(m({},"__esModule",{value:!0}),e);var P={};h(P,{default:()=>w});module.exports=y(P);var i=require("@raycast/api"),d=require("fs");var n=require("@raycast/api");var a=require("fs"),l=require("path");var c=e=>(e.d1=e.d1=="----"?void 0:e.d1,e.d2=e.d2=="----"?void 0:e.d2,Math.round((e.d1?new Date(e.d1):new Date).getTime()-(e.d2?new Date(e.d2):new Date).getTime())/1e3);var b=n.environment.supportPath+"/customTimers.json",N=n.environment.supportPath+"/defaultPresetVisibles.json";function f(){let e=[];return(0,a.readdirSync)(n.environment.supportPath).forEach(s=>{if((0,l.extname)(s)==".timer"){let t={name:"",secondsSet:-99,timeLeft:-99,originalFile:s,timeEnds:new Date};t.name=(0,a.readFileSync)(n.environment.supportPath+"/"+s).toString();let o=s.split("---");t.secondsSet=Number(o[1].split(".")[0]);let u=o[0].replace(/__/g,":");t.timeLeft=Math.max(0,Math.round(t.secondsSet-c({d2:u}))),t.timeEnds=new Date(u),t.timeEnds.setSeconds(t.timeEnds.getSeconds()+t.secondsSet),e.push(t)}}),e.sort((s,t)=>s.timeLeft-t.timeLeft),e}var w=async()=>{if(!(0,i.getPreferenceValues)().ringContinuously)return await(0,i.showToast)({style:i.Toast.Style.Failure,title:"Ring Continuously setting not enabled!"});let e=f().filter(s=>s.timeLeft===0);if(e.length===0)return await(0,i.showToast)({style:i.Toast.Style.Failure,title:"No finished timers found!"});await(0,i.closeMainWindow)();let r=e[0].originalFile.replace(".timer",".dismiss");(0,d.unlinkSync)(i.environment.supportPath+"/"+r)};
