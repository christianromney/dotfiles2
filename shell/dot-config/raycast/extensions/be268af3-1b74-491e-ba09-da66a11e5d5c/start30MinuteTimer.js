"use strict";var u=Object.defineProperty;var $=Object.getOwnPropertyDescriptor;var D=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var w=(t,e)=>{for(var r in e)u(t,r,{get:e[r],enumerable:!0})},P=(t,e,r,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of D(e))!y.call(t,i)&&i!==r&&u(t,i,{get:()=>e[i],enumerable:!(a=$(e,i))||a.enumerable});return t};var O=t=>P(u({},"__esModule",{value:!0}),t);var C={};w(C,{default:()=>M});module.exports=O(C);var T=require("@raycast/api");var s=require("@raycast/api"),f=require("child_process");var o=require("fs");var p=t=>{let e=Math.floor(t/3600),r=String(Math.floor(t%3600/60)).padStart(2,"0"),a=String(Math.floor(t%60)).padStart(2,"0");return`${e}:${r}:${a}`};var J=s.environment.supportPath+"/customTimers.json",h=(t=!1)=>{let e=(0,s.getPreferenceValues)();if(parseFloat(e.volumeSetting)>5){let r="\u26A0\uFE0F Timer alert volume should not be louder than 5 (it can get quite loud!)";return t?(0,s.showHUD)(r):(0,s.showToast)({style:s.Toast.Style.Failure,title:r}),!1}return!0};async function S(t,e="Untitled",r="default"){let i=(s.environment.supportPath+"/"+new Date().toISOString()+"---"+t+".timer").replace(/:/g,"__");(0,o.writeFileSync)(i,e);let c=(0,s.getPreferenceValues)(),g=`${s.environment.assetsPath+"/"+(r==="default"?c.selectedSound:r)}`,n=[`sleep ${t}`];n.push(`if [ -f "${i}" ]; then osascript -e 'display notification "Timer \\"${e}\\" complete" with title "Ding!"'`);let d=`afplay "${g}" --volume ${c.volumeSetting.replace(",",".")}`;if(c.selectedSound==="speak_timer_name"?n.push(`say "${e}"`):n.push(d),c.ringContinuously){let m=`${i}`.replace(".timer",".dismiss");(0,o.writeFileSync)(m,".dismiss file for Timers"),n.push(`while [ -f "${m}" ]; do ${d}; done`)}n.push(`rm "${i}"; else echo "Timer deleted"; fi`),(0,f.exec)(n.join(" && "),(m,l)=>{if(m){console.log(`error: ${m.message}`);return}if(l){console.log(`stderr: ${l}`);return}}),(0,s.popToRoot)(),await(0,s.showHUD)(`Timer "${e}" started for ${p(t)}! \u{1F389}`)}var M=async()=>{h()&&(await(0,T.closeMainWindow)(),await S(60*30,"30 Minute Timer"))};
